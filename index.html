<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nova AI - Moderation Dashboard</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #0f0f1a, #1a1a2e);
            min-height: 100vh;
            color: #fff;
            padding: 20px;
        }
        .container { max-width: 1400px; margin: 0 auto; }
        h1 {
            text-align: center;
            font-size: 2.5em;
            margin-bottom: 10px;
            background: linear-gradient(45deg, #5865F2, #EB459E);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .subtitle { text-align: center; color: #888; margin-bottom: 30px; }
        .status-bar {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }
        .status-item {
            padding: 10px 20px;
            border-radius: 25px;
            font-weight: bold;
        }
        .status-online { background: #57F287; color: #000; }
        .status-ai { background: #5865F2; color: #fff; }
        .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-bottom: 25px; }
        .card {
            background: rgba(255,255,255,0.05);
            border-radius: 15px;
            padding: 20px;
            border: 1px solid rgba(255,255,255,0.1);
            text-align: center;
        }
        .card.wide { grid-column: span 2; }
        .card h3 { color: #5865F2; margin-bottom: 10px; font-size: 0.95em; }
        .stat { font-size: 2.2em; font-weight: bold; }
        .stat.green { color: #57F287; }
        .stat.red { color: #ED4245; }
        .stat.yellow { color: #FEE75C; }
        .stat.blue { color: #5865F2; }
        .stat.pink { color: #EB459E; }
        .label { color: #888; font-size: 0.85em; margin-top: 5px; }
        .section { margin-bottom: 25px; }
        .section-title { font-size: 1.3em; margin-bottom: 15px; color: #5865F2; }
        .settings-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 10px; }
        .setting {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            background: rgba(255,255,255,0.05);
            border-radius: 10px;
        }
        .toggle { position: relative; width: 50px; height: 26px; }
        .toggle input { opacity: 0; width: 0; height: 0; }
        .slider {
            position: absolute; cursor: pointer;
            top: 0; left: 0; right: 0; bottom: 0;
            background: #333; border-radius: 26px; transition: 0.3s;
        }
        .slider:before {
            position: absolute; content: ""; height: 20px; width: 20px;
            left: 3px; bottom: 3px; background: #fff;
            border-radius: 50%; transition: 0.3s;
        }
        .toggle input:checked + .slider { background: #57F287; }
        .toggle input:checked + .slider:before { transform: translateX(24px); }
        .logs {
            background: rgba(0,0,0,0.3);
            border-radius: 10px;
            padding: 15px;
            max-height: 400px;
            overflow-y: auto;
        }
        .log {
            padding: 10px;
            margin-bottom: 8px;
            border-radius: 8px;
            font-size: 0.9em;
            border-left: 4px solid;
            font-family: monospace;
        }
        .log-success { background: rgba(87,242,135,0.1); border-color: #57F287; }
        .log-moderation { background: rgba(237,66,69,0.1); border-color: #ED4245; }
        .log-response { background: rgba(88,101,242,0.1); border-color: #5865F2; }
        .log-warning { background: rgba(254,231,92,0.1); border-color: #FEE75C; }
        .log-join { background: rgba(87,242,135,0.1); border-color: #57F287; }
        .log-config { background: rgba(235,69,158,0.1); border-color: #EB459E; }
        input[type="number"] {
            width: 80px;
            padding: 8px;
            border-radius: 8px;
            border: 1px solid rgba(255,255,255,0.2);
            background: rgba(0,0,0,0.3);
            color: #fff;
            text-align: center;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üõ°Ô∏è Nova AI Moderation</h1>
        <p class="subtitle">Advanced AI-Powered Server Protection</p>

        <div class="status-bar">
            <span class="status-item status-online">‚óè Bot Online</span>
            <span class="status-item status-ai" id="aiStatus">üß† AI Active</span>
        </div>

        <!-- Stats Grid -->
        <div class="section">
            <div class="section-title">üìä Moderation Statistics</div>
            <div class="grid">
                <div class="card">
                    <h3>üîç Messages Scanned</h3>
                    <div class="stat blue" id="scanned">0</div>
                </div>
                <div class="card">
                    <h3>üóëÔ∏è Messages Deleted</h3>
                    <div class="stat red" id="deleted">0</div>
                </div>
                <div class="card">
                    <h3>‚ö†Ô∏è Warnings Given</h3>
                    <div class="stat yellow" id="warnings">0</div>
                </div>
                <div class="card">
                    <h3>üîá Users Muted</h3>
                    <div class="stat red" id="mutes">0</div>
                </div>
                <div class="card">
                    <h3>üß† AI Detections</h3>
                    <div class="stat pink" id="aiDetections">0</div>
                </div>
                <div class="card">
                    <h3>üö´ Spam Blocked</h3>
                    <div class="stat red" id="spam">0</div>
                </div>
                <div class="card">
                    <h3>ü§¨ Bad Words Blocked</h3>
                    <div class="stat red" id="badwords">0</div>
                </div>
                <div class="card">
                    <h3>üîó Links Blocked</h3>
                    <div class="stat yellow" id="links">0</div>
                </div>
            </div>
        </div>

        <!-- Server Stats -->
        <div class="section">
            <div class="section-title">üåê Server Info</div>
            <div class="grid">
                <div class="card">
                    <h3>Servers</h3>
                    <div class="stat green" id="guilds">0</div>
                </div>
                <div class="card">
                    <h3>Users</h3>
                    <div class="stat green" id="users">0</div>
                </div>
                <div class="card">
                    <h3>Ping</h3>
                    <div class="stat blue" id="ping">0ms</div>
                </div>
                <div class="card">
                    <h3>Uptime</h3>
                    <div class="stat blue" id="uptime">0m</div>
                </div>
            </div>
        </div>

        <!-- Settings -->
        <div class="section">
            <div class="section-title">‚öôÔ∏è Moderation Settings</div>
            <div class="settings-grid">
                <div class="setting">
                    <span>üõ°Ô∏è Moderation Enabled</span>
                    <label class="toggle">
                        <input type="checkbox" id="enabled" checked onchange="updateSetting('enabled', this.checked)">
                        <span class="slider"></span>
                    </label>
                </div>
                <div class="setting">
                    <span>üß† AI Toxicity Detection</span>
                    <label class="toggle">
                        <input type="checkbox" id="useAI" checked onchange="updateSetting('useAI', this.checked)">
                        <span class="slider"></span>
                    </label>
                </div>
                <div class="setting">
                    <span>üö´ Detect Spam</span>
                    <label class="toggle">
                        <input type="checkbox" id="detectSpam" checked onchange="updateSetting('detectSpam', this.checked)">
                        <span class="slider"></span>
                    </label>
                </div>
                <div class="setting">
                    <span>ü§¨ Detect Bad Words</span>
                    <label class="toggle">
                        <input type="checkbox" id="detectBadWords" checked onchange="updateSetting('detectBadWords', this.checked)">
                        <span class="slider"></span>
                    </label>
                </div>
                <div class="setting">
                    <span>‚ò†Ô∏è Detect Toxicity</span>
                    <label class="toggle">
                        <input type="checkbox" id="detectToxicity" checked onchange="updateSetting('detectToxicity', this.checked)">
                        <span class="slider"></span>
                    </label>
                </div>
                <div class="setting">
                    <span>üîó Detect Links</span>
                    <label class="toggle">
                        <input type="checkbox" id="detectLinks" onchange="updateSetting('detectLinks', this.checked)">
                        <span class="slider"></span>
                    </label>
                </div>
                <div class="setting">
                    <span>üî† Detect Excessive Caps</span>
                    <label class="toggle">
                        <input type="checkbox" id="detectCaps" checked onchange="updateSetting('detectCaps', this.checked)">
                        <span class="slider"></span>
                    </label>
                </div>
                <div class="setting">
                    <span>üì® Detect Invites</span>
                    <label class="toggle">
                        <input type="checkbox" id="detectInvites" checked onchange="updateSetting('detectInvites', this.checked)">
                        <span class="slider"></span>
                    </label>
                </div>
                <div class="setting">
                    <span>üóëÔ∏è Auto-Delete Messages</span>
                    <label class="toggle">
                        <input type="checkbox" id="deleteMessages" checked onchange="updateSetting('deleteMessages', this.checked)">
                        <span class="slider"></span>
                    </label>
                </div>
                <div class="setting">
                    <span>‚ö†Ô∏è Warn Users</span>
                    <label class="toggle">
                        <input type="checkbox" id="warnUsers" checked onchange="updateSetting('warnUsers', this.checked)">
                        <span class="slider"></span>
                    </label>
                </div>
                <div class="setting">
                    <span>üîá Auto-Mute on Max Warnings</span>
                    <label class="toggle">
                        <input type="checkbox" id="autoMute" checked onchange="updateSetting('autoMute', this.checked)">
                        <span class="slider"></span>
                    </label>
                </div>
                <div class="setting">
                    <span>‚ö†Ô∏è Max Warnings</span>
                    <input type="number" id="maxWarnings" value="3" min="1" max="10" onchange="updateSetting('maxWarnings', parseInt(this.value))">
                </div>
                <div class="setting">
                    <span>üîá Mute Duration (minutes)</span>
                    <input type="number" id="muteDuration" value="10" min="1" max="1440" onchange="updateSetting('muteDuration', parseInt(this.value))">
                </div>
                <div class="setting">
                    <span>üö´ Spam Threshold (msgs)</span>
                    <input type="number" id="spamMessages" value="5" min="3" max="20" onchange="updateSetting('spamMessages', parseInt(this.value))">
                </div>
            </div>
        </div>

        <!-- Logs -->
        <div class="section">
            <div class="section-title">üìù Live Activity Logs</div>
            <div class="logs" id="logs">
                <p style="color:#888">Waiting for activity...</p>
            </div>
        </div>
    </div>

    <script src="/socket.io/socket.io.js"></script>
    <script>
        const socket = io();

        socket.on('stats', (data) => {
            document.getElementById('scanned').textContent = data.messagesScanned || 0;
            document.getElementById('deleted').textContent = data.messagesDeleted || 0;
            document.getElementById('warnings').textContent = data.warningsGiven || 0;
            document.getElementById('mutes').textContent = data.mutesDone || 0;
            document.getElementById('aiDetections').textContent = data.aiDetections || 0;
            document.getElementById('spam').textContent = data.spamBlocked || 0;
            document.getElementById('badwords').textContent = data.badWordsBlocked || 0;
            document.getElementById('links').textContent = data.linksBlocked || 0;
            document.getElementById('guilds').textContent = data.guilds || 0;
            document.getElementById('users').textContent = data.users || 0;
            document.getElementById('ping').textContent = (data.ping || 0) + 'ms';
            document.getElementById('uptime').textContent = Math.floor((data.uptime || 0) / 60000) + 'm';
            
            if (data.ai) {
                document.getElementById('aiStatus').textContent = data.ai.enabled ? 'üß† AI Active' : 'üß† AI Offline';
            }
        });

        socket.on('settings', (settings) => {
            Object.keys(settings).forEach(key => {
                const el = document.getElementById(key);
                if (el) {
                    if (el.type === 'checkbox') el.checked = settings[key];
                    else if (el.type === 'number') el.value = settings[key];
                }
            });
        });

        socket.on('logs', (logs) => {
            const container = document.getElementById('logs');
            if (!logs.length) {
                container.innerHTML = '<p style="color:#888">No activity yet...</p>';
                return;
            }
            container.innerHTML = logs.slice(-30).reverse().map(log => 
                `<div class="log log-${log.type}">
                    <strong>${new Date(log.timestamp).toLocaleTimeString()}</strong> ${log.message}
                </div>`
            ).join('');
        });

        socket.on('newLog', (log) => {
            const container = document.getElementById('logs');
            const div = document.createElement('div');
            div.className = `log log-${log.type}`;
            div.innerHTML = `<strong>${new Date(log.timestamp).toLocaleTimeString()}</strong> ${log.message}`;
            container.insertBefore(div, container.firstChild);
        });

        function updateSetting(key, value) {
            socket.emit('updateSettings', { [key]: value });
        }

        // Request initial settings
        fetch('/api/settings').then(r => r.json()).then(settings => {
            Object.keys(settings).forEach(key => {
                const el = document.getElementById(key);
                if (el) {
                    if (el.type === 'checkbox') el.checked = settings[key];
                    else if (el.type === 'number') el.value = settings[key];
                }
            });
        });
    </script>
</body>
</html>